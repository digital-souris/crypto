"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[356],{356:(t,e,a)=>{a.r(e),a.d(e,{default:()=>u});var r=a(381),n=a.n(r);function o(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}const i={name:"Login",data:function(){return{form:{Login:[{name:"email",value:"",type:"email"},{name:"password",value:"",type:"password"}],Register:[{name:"email",value:"",type:"email"},{name:"password",value:"",type:"password"},{name:"password_confirmation",value:"",type:"password"}]},errors:null}},methods:{sendForm:function(){var t=this;this.errors=null;var e,a={},r=o(this.form[this.$route.name]);try{for(r.s();!(e=r.n()).done;){var s=e.value;a[s.name]=s.value}}catch(t){r.e(t)}finally{r.f()}"Register"===this.$route.name?this.axios.post("/auth/register",a).then((function(){t.$notify({type:"success",text:"Вы успешно зарегистировались"}),t.$router.push("/login")})).catch((function(e){t.errors=e.response.data.errors})):"Login"===this.$route.name&&this.axios.post("/auth/login",a).then((function(e){localStorage.setItem("token",e.data.access_token),localStorage.setItem("tokenTime",n()().add(e.data.expires_in,"second").format("TTl")),t.axios.defaults.headers.common={Authorization:"bearer ".concat(e.data.access_token)},t.$store.commit("changeUser",e.data.user),t.$router.push("/")})).catch((function(e){t.$notify({type:"error",text:t.$t("notify.login")})}))}}};const u=(0,a(1900).Z)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"section section_first"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"auth"},[a("div",{staticClass:"auth__wrapper"},[a("div",{staticClass:"auth__head"},[a("div",{staticClass:"auth__title"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$t("authPage."+t.$route.name+".title"))+"\n\t\t\t\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"auth__body"},[a("form",{attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.sendForm.apply(null,arguments)}}},[t._l(t.form[t.$route.name],(function(e,r){return a("div",{key:r,staticClass:"auth__item"},["checkbox"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],attrs:{name:e.name,placeholder:t.$t("authPage.form."+e.name),type:"checkbox"},domProps:{checked:Array.isArray(e.value)?t._i(e.value,null)>-1:e.value},on:{change:function(a){var r=e.value,n=a.target,o=!!n.checked;if(Array.isArray(r)){var s=t._i(r,null);n.checked?s<0&&t.$set(e,"value",r.concat([null])):s>-1&&t.$set(e,"value",r.slice(0,s).concat(r.slice(s+1)))}else t.$set(e,"value",o)}}}):"radio"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],attrs:{name:e.name,placeholder:t.$t("authPage.form."+e.name),type:"radio"},domProps:{checked:t._q(e.value,null)},on:{change:function(a){return t.$set(e,"value",null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],attrs:{name:e.name,placeholder:t.$t("authPage.form."+e.name),type:e.type},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}),t._v(" "),t.errors&&t.errors[e.name]?a("div",{staticClass:"auth__error"},[t._v(t._s(t.errors[e.name][0]))]):t._e()])})),t._v(" "),a("div",{staticClass:"auth__button"},[a("button",{staticClass:"button button_green button_auth"},[t._v(t._s(t.$t("authPage.button."+t.$route.name)))])])],2)])])])])])])])}),[],!1,null,"3e1bce3a",null).exports}}]);